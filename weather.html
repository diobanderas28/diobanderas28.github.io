<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-ka7Sk0Gln4gmtz2MlQnikT1wXgYsOg+OMhuP+IlRH9sENBO0LRn5q+8nbTov4+1p" crossorigin="anonymous"></script>
    <title>Weather API</title>
    <style>
        *{
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        body{
            padding: 20px;
            background-color: #282828;
        }
    </style>
</head>
<body>
    <div class="card mb-3">
        <div class="card-body">
            <label for="searchValue" class="mb-3">
                <h3>Simple Weather Web API Testing</h3>
                <small>© Dio Banderas</small>
            </label>
            <input type="text" name="" class="searchValue form-control mb-2" placeholder="Enter city name ...">
            <input type="submit" value="Search" class="btn btn-primary searchButton">
        </div>
    </div>
    <div class="card mb-3" style="display:none; text-align:center;" id="result">
        <div class="card-body">
            <h1 class="cities"></h1>
            <small class="dates"></small><br>
            <text class="cityDesc"></text>
            <h2 class="cityTemp"></h2>
        </div>
    </div>
    <div class="card">
        <div class="card-body">
            Technology that i used to create this simple weather website:<br>
            Bootstrap 5<br>
            OpenWeatherMap API<br>
            JavaScript
            <hr>
            Contact:
            <a href="mailto:diobanderas21@gmail.com" style="text-decoration:none">Dio Banderas</a>
        </div>
    </div>

    <script>
        var button = document.querySelector('.searchButton')
        var inputValue = document.querySelector('.searchValue')
        var cities = document.querySelector('.cities');
        var desc = document.querySelector('.cityDesc');
        var temp = document.querySelector('.cityTemp');
        var today = document.querySelector('.dates');

       button.addEventListener('click', function(){
        fetch('https://api.openweathermap.org/data/2.5/weather?q='+inputValue.value+'&lang=id&appid=1baf98fa92f2e0f09a94afe74cc19ec2')
        .then(response => response.json())
        .then(data => {
            var nameValue = data['name'];
            var tempValue = data['main']['temp'];
            var descValue = data['weather'][0]['main'];
            var codeValue = data['sys']['country']
            var celcius = (parseInt(tempValue)-273);
            
            var tanggallengkap = new String();
            var namahari = ("Sunday Monday Tuesday Wednesday Thursday Friday Saturday");
            namahari = namahari.split(" ");
            var namabulan = ("January February March April Mei June July August September Oktober November Desember");
            namabulan = namabulan.split(" ");
            var tgl = new Date();
            var hari = tgl.getDay();
            var tanggal = tgl.getDate();
            var bulan = tgl.getMonth();
            var tahun = tgl.getFullYear();
            tanggallengkap = namahari[hari] + ", " +tanggal + " " + namabulan[bulan] + " " + tahun;

            cities.innerHTML = nameValue+', '+codeValue;
            today.innerHTML = tanggallengkap;
            temp.innerHTML = celcius+'°C';
            desc.innerHTML = descValue;
        })
        .catch(err => alert('Wrong city name!'))
        document.getElementById("result").style.display = 'flex';
       })
    </script>
</body>
</html>
